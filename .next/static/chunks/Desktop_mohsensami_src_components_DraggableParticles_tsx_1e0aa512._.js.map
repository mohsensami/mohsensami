{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Mohsen/Desktop/mohsensami/src/components/DraggableParticles.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect, useRef } from \"react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { useGamification } from \"@/contexts/GamificationContext\";\n\ninterface Particle {\n  id: number;\n  x: number;\n  y: number;\n  vx: number; // velocity x\n  vy: number; // velocity y\n  size: number;\n  color: string;\n}\n\ninterface ExplosionParticle {\n  id: string;\n  x: number;\n  y: number;\n  vx: number;\n  vy: number;\n  color: string;\n  size: number;\n}\n\nexport default function DraggableParticles() {\n  const [mousePos, setMousePos] = useState({ x: 0, y: 0 });\n  const [explosions, setExplosions] = useState<ExplosionParticle[]>([]);\n  const [explodedIds, setExplodedIds] = useState<Set<number>>(new Set());\n  const [, forceUpdate] = useState({});\n  const particlesRef = useRef<Particle[]>([]);\n  const { completeAction } = useGamification();\n\n  // Initialize particles\n  useEffect(() => {\n    const particleCount = 30;\n    const colors = [\"#537FE7\", \"#6B95F0\", \"#87B1F9\", \"#AFCBFB\"];\n    const width = typeof window !== \"undefined\" ? window.innerWidth : 1920;\n    const height = typeof window !== \"undefined\" ? window.innerHeight : 1080;\n\n    particlesRef.current = Array.from({ length: particleCount }, (_, i) => ({\n      id: i,\n      x: Math.random() * width,\n      y: Math.random() * height,\n      vx: (Math.random() - 0.5) * 0.5, // Slow velocity\n      vy: (Math.random() - 0.5) * 0.5,\n      size: Math.random() * 8 + 4,\n      color: colors[Math.floor(Math.random() * colors.length)],\n    }));\n  }, []);\n\n  // Track mouse position\n  useEffect(() => {\n    const handleMouseMove = (e: MouseEvent) => {\n      setMousePos({ x: e.clientX, y: e.clientY });\n    };\n\n    window.addEventListener(\"mousemove\", handleMouseMove);\n    return () => window.removeEventListener(\"mousemove\", handleMouseMove);\n  }, []);\n\n  // Animate particles\n  useEffect(() => {\n    const width = typeof window !== \"undefined\" ? window.innerWidth : 1920;\n    const height = typeof window !== \"undefined\" ? window.innerHeight : 1080;\n    let animationFrameId: number;\n\n    const animate = () => {\n      particlesRef.current = particlesRef.current.map((particle) => {\n        let { x, y, vx, vy } = particle;\n\n        // Apply attraction force to mouse cursor\n        const dx = mousePos.x - x;\n        const dy = mousePos.y - y;\n        const distance = Math.sqrt(dx * dx + dy * dy);\n        const attractionRadius = 150;\n\n        if (distance < attractionRadius && distance > 0) {\n          const force = (1 - distance / attractionRadius) * 0.08;\n          vx += (dx / distance) * force;\n          vy += (dy / distance) * force;\n        }\n\n        // Apply velocity\n        x += vx;\n        y += vy;\n\n        // Damping\n        vx *= 0.98;\n        vy *= 0.98;\n\n        // Add slight random movement\n        vx += (Math.random() - 0.5) * 0.1;\n        vy += (Math.random() - 0.5) * 0.1;\n\n        // Boundary bounce\n        if (x < 0 || x > width) vx *= -0.8;\n        if (y < 0 || y > height) vy *= -0.8;\n\n        // Keep in bounds\n        x = Math.max(0, Math.min(width, x));\n        y = Math.max(0, Math.min(height, y));\n\n        return { ...particle, x, y, vx, vy };\n      });\n\n      forceUpdate({});\n      animationFrameId = requestAnimationFrame(animate);\n    };\n\n    animate();\n    return () => cancelAnimationFrame(animationFrameId);\n  }, [mousePos]);\n\n  // Clean up explosions\n  useEffect(() => {\n    if (explosions.length > 0) {\n      const timer = setTimeout(() => {\n        setExplosions([]);\n      }, 2000);\n      return () => clearTimeout(timer);\n    }\n  }, [explosions]);\n\n  const handleClick = (particle: Particle) => {\n    // Mark particle as exploded\n    setExplodedIds((prev) => new Set([...prev, particle.id]));\n\n    // Trigger gamification action\n    completeAction(\"action_8\");\n\n    // Create explosion particles\n    const explosionCount = 12;\n    const newExplosions: ExplosionParticle[] = Array.from(\n      { length: explosionCount },\n      (_, i) => {\n        const angle = (i / explosionCount) * Math.PI * 2;\n        const speed = Math.random() * 1.5 + 1;\n        return {\n          id: `${particle.id}-${i}-${Date.now()}`,\n          x: particle.x,\n          y: particle.y,\n          vx: Math.cos(angle) * speed,\n          vy: Math.sin(angle) * speed,\n          color: particle.color,\n          size: Math.random() * 3 + 2,\n        };\n      }\n    );\n\n    setExplosions((prev) => [...prev, ...newExplosions]);\n  };\n\n  return (\n    <div className=\"absolute inset-0 overflow-hidden pointer-events-none\">\n      {/* Animated Particles */}\n      {particlesRef.current\n        .filter((particle) => !explodedIds.has(particle.id))\n        .map((particle) => (\n          <motion.div\n            key={particle.id}\n            className=\"absolute pointer-events-auto cursor-pointer\"\n            style={{\n              x: particle.x,\n              y: particle.y,\n              width: particle.size,\n              height: particle.size,\n            }}\n            onClick={() => handleClick(particle)}\n            whileHover={{ scale: 1.5 }}\n          >\n            <motion.div\n              className=\"w-full h-full rounded-full\"\n              animate={{\n                opacity: [0.4, 0.8, 0.4],\n              }}\n              transition={{\n                duration: 2 + Math.random(),\n                repeat: Infinity,\n                ease: \"easeInOut\",\n              }}\n              style={{\n                background: `radial-gradient(circle, ${particle.color}, transparent)`,\n                boxShadow: `0 0 ${particle.size * 2}px ${particle.color}`,\n              }}\n            />\n          </motion.div>\n        ))}\n\n      {/* Explosion Particles */}\n      <AnimatePresence>\n        {explosions.map((exp) => (\n          <motion.div\n            key={exp.id}\n            className=\"absolute pointer-events-none\"\n            initial={{\n              x: exp.x,\n              y: exp.y,\n              scale: 1,\n              opacity: 0.8,\n            }}\n            animate={{\n              x: exp.x + exp.vx * 70,\n              y: exp.y + exp.vy * 70,\n              scale: [1, 1.2, 0],\n              opacity: [0.8, 0.5, 0],\n            }}\n            exit={{\n              opacity: 0,\n              scale: 0,\n            }}\n            transition={{\n              duration: 1,\n              ease: \"easeOut\",\n            }}\n            style={{\n              width: exp.size,\n              height: exp.size,\n            }}\n          >\n            <div\n              className=\"w-full h-full rounded-full\"\n              style={{\n                background: `radial-gradient(circle, ${exp.color}, transparent)`,\n                boxShadow: `0 0 ${exp.size * 3}px ${exp.color}`,\n              }}\n            />\n          </motion.div>\n        ))}\n      </AnimatePresence>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}